name: 自动抓取新闻

on:
  schedule:
    - cron: '0 0 * * *'  # 每天 UTC 0 点运行，相当于北京时间 8 点
  workflow_dispatch:  # 允许手动触发工作流

jobs:
  fetch_rss:
    runs-on: ubuntu-latest  # 使用 Ubuntu 系统执行任务

    steps:
    - name: 检出代码
      uses: actions/checkout@v2  # 检出当前仓库的代码

    - name: 设置 Python 环境
      uses: actions/setup-python@v2
      with:
        python-version: '3.x'  # 安装 Python 3.x

    - name: 安装依赖
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt  # 假设你的依赖列在 requirements.txt 文件中

    - name: 运行抓取脚本
      run: |
        python path/to/your/script.py  # 替换为你的脚本路径

    - name: 提交更新（如果需要）
      run: |
        git config --global user.name 'Your GitHub Username'
        git config --global user.email 'your-email@example.com'
        git add .
        git commit -m '更新抓取的新闻'
        git push
